/* ===========================================================
 * bootstrap-hint.js v1.1.0
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Code by Wianto Wie 
 * email ianplater75@gmail.com 
 * Copyright 2013 twitter-bootstrap-plugins, Inc.
 * Website http://twitter-bootstrap-plugins.blogspot.com/
 *
 * Detail info http://twitter-bootstrap-plugins.blogspot.com/2013/07/bootstrap-hint-for-twitter-bootstrap.html
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(g){var i=0;var h=0;var f=0,b=0,d=0,a=0;var e=function(n,l){var j=this;this.options=l;this.forceHide=false;this.forceShow=false;this.bubbleHover=false;this.underMouse=false;this.hintElement=n;this.hintBubble=this.bubble();this.UniqueId=this.getUniqueId("hint");this.hintElement.attr("data-uxid",this.UniqueId);var k=l.target||(l.target&&l.target.replace(/.*(?=#[^\s]+$)/,""));if(/#/.test(k)&&g(k).length){g(l.target).appendTo(this.hintBubble.find(".hint-inner")).removeAttr("id")}else{var m=this.getContent();this.hintBubble.find(".hint-inner")[this.options.html?"html":"text"](m)}this.hintBubble[0].className="hint";this.hintBubble.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);this.hintBubble.bind("click",function(){var p=j.getBubbleRootParent();if(p!="body"){g.event.trigger("hintshowbyid"+p)}else{j.toTop()}});this.hintBubble.attr("data-bubble",this.UniqueId);var o=this.getBubbleParent();this.hintBubble.attr("data-parent",o);this.hintBubble.hover(g.proxy(this.bubbleHoverIn,this),g.proxy(this.bubbleHoverOut,this));if(l.trigger!="click"){this.hintElement.hover(g.proxy(this.show,this),g.proxy(this.hide,this))}else{this.hintElement.css("cursor","pointer");this.hintElement.hover(g.proxy(this.bubbleHoverIn,this),g.proxy(this.bubbleHoverOut,this));this.hintElement.bind("click",function(p){if(j.isShown){j.forceShow=false;j.forceHide=true;j.hide()}else{j.forceShow=true;j.forceHide=false;j.show()}p.preventDefault();p.stopPropagation()})}g(document).on("click.hint.remove"+this.UniqueId,g.proxy(this.hintRemove,this));g(document).on("mousemove.hint.mouse"+this.UniqueId,function(p){if(!j.isShown){return}if((p.pageX>f&&p.pageX<b)&&(p.pageY>d&&p.pageY<a)){if(l.trigger=="click"){j.underMouse=true}}else{j.underMouse=false}});this.hintElement.bind("onHintHide",function(){j.checkHidden()});this.hintElement.bind("hintshowbyparent"+o,function(){j.toTop()});this.hintElement.bind("hintshowbyid"+this.UniqueId,function(){j.toTop()})};e.prototype={constructor:e,getUniqueId:function(j){var k=i++;return j?j+k:k},fixContent:function(k){var j=k.attr("title")||k.data("content");if(typeof j=="string"){k.data("content",'<div class="hint-content">'+j+"</div>");k.removeAttr("title")}else{k.data("content",'<div style="padding:8px;0px;"><div class="ajax-loading"></div></div>')}},getContent:function(){var k,j=this.hintElement,l=this.options;this.fixContent(j);var l=this.options;if(typeof l.content=="string"){k=j.data("content")}else{if(typeof l.content=="function"){k=l.content.call(j[0])}}k=(""+k).replace(/(^\s*|\s*$)/,"");return k||l.fallback},bubble:function(){if(!this.$hintBubble){this.$hintBubble=g('<div class="hint"></div>').html('<div class="hint-arrow"></div><div class="hint-arrow2"></div><div class="hint-inner"></div>')}return this.$hintBubble},bubbleHoverIn:function(){if(this.timeHide){clearTimeout(this.timeHide)}this.bubbleHover=true},bubbleHoverOut:function(){this.bubbleHover=false;this.hide()},hide:function(){if(!this.isShown){return}if(this.forceHide==true){this.bubbleHover=false;this.underMouse=false;this.hintHide();return}this.options.delayOut>0?this.hintHideDelay():this.hintHide()},hintHideDelay:function(){var j=this;this.timeHide=setTimeout(function(){j.hintHide()},this.options.delayOut)},hintHide:function(){if(!this.isShown){return}if(this.underMouse==false&&this.bubbleHover==false){this.isShown=false;this.hintBubble.css({visibility:"hidden"});h--;g.event.trigger("onHintHide")}},hintRemove:function(){var j=g("*[data-uxid="+this.UniqueId+"]");if(!j.length){this.hintDelete()}if(this.underMouse==false){this.hintHide()}},show:function(){if(this.isShown){return}if(this.forceShow==true){this.hintShow();return}this.options.delayIn>0?this.hintShowDelay():this.hintShow()},hintShowDelay:function(){var j=this;setTimeout(function(){j.hintShow()},this.options.delayIn)},hintShow:function(){this.isShown=true;this.bubbleHover=false;this.hintBubble[0].className="hint";var p=g.extend({},this.hintElement.offset(),{width:this.hintElement[0].offsetWidth,height:this.hintElement[0].offsetHeight});this.options.gravity=this.autoBounds(200,"nw");var l=this.hintBubble[0].offsetWidth,o=this.hintBubble[0].offsetHeight;var n=(typeof this.options.gravity=="function")?this.options.gravity.call(this.hintElement[0]):this.options.gravity;var j=this.searchFixedParent(this.hintElement);if(j.css("position")=="fixed"){this.hintBubble.css("position","fixed");p.top=p.top-g(document).scrollTop();p.left=p.left-g(document).scrollLeft()}var m;switch(n.charAt(0)){case"n":m={top:p.top+p.height+this.options.offset,left:p.left+p.width/2-l/2};break;case"s":m={top:p.top-o-this.options.offset,left:p.left+p.width/2-l/2};break;case"e":m={top:p.top+p.height/2-o/2,left:p.left-l-this.options.offset};break;case"w":m={top:p.top+p.height/2-o/2,left:p.left+p.width+this.options.offset};break}if(n.length==2){if(n.charAt(1)=="w"){m.left=p.left+p.width/2-33}else{m.left=p.left+p.width/2-l+33}}this.hintBubble.css(m).addClass("hint-"+n);if(this.options.fade){this.hintBubble.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{this.hintBubble.css({visibility:"visible",opacity:this.options.opacity})}this.toTop();h++;var k=10;if(h==1){f=m.left-k;b=m.left+l+k;d=m.top-k;a=m.top+o+k}if(h>1){f=(m.left-k<f)?m.left-k:f;b=(m.left+l+k>b)?m.left+l+k:b;d=(m.top-k<d)?m.top-k:d;a=(m.top+o+k>a)?m.top+o+k:a}},toTop:function(){var j=1010;var k=g(".hint").length;g("body").find(".hint[data-parent!="+this.UniqueId+"]").each(function(){var l=g(this).css("z-index");g(this).css("z-index",l-1)});this.hintBubble.css("z-index",j);g.event.trigger("hintshowbyparent"+this.UniqueId)},hintDelete:function(){g(document).off("click.hint.remove"+this.UniqueId);g(document).off("mousemove.hint.mouse"+this.UniqueId);this.hintElement.unbind();this.hintElement.removeData();this.hintElement.empty();this.hintElement.remove();this.hintBubble.unbind();this.hintBubble.removeData();this.hintBubble.empty();this.hintBubble.remove()},autoBounds:function(m,l){var k={ns:l[0],ew:(l.length>1?l[1]:false)};var n=g(document).scrollTop()+m;var j=g(document).scrollLeft()+m;if(this.hintElement.offset().top<n){k.ns="n"}if(this.hintElement.offset().left<j){k.ew="w"}if(g(window).width()+g(document).scrollLeft()-this.hintElement.offset().left<m){k.ew="e"}if(g(window).height()+g(document).scrollTop()-this.hintElement.offset().top<m){k.ns="s"}return k.ns+(k.ew?k.ew:"")},searchFixedParent:function(o){var l=o;var m;for(m=0;m<20;m++){l=l.parent();var n=l instanceof jQuery;if(n){var k=g(l).prop("tagName");if(k.toLowerCase()=="body"){break}var j=g(l).css("position");if(j.toLowerCase()=="fixed"){break}}else{g("body")}}return l},checkHidden:function(){var k=this.hintElement;var m;for(m=0;m<20;m++){k=k.parent();var n=k instanceof jQuery;if(n){var j=g(k).prop("tagName");if(j.toLowerCase()=="body"){break}var l=g(k).css("visibility");if(l.toLowerCase()=="hidden"){this.bubbleHover=false;this.underMouse=false;this.hintHide();break}}}},getBubbleParent:function(){var j=this.hintElement;var k=j.closest("*[data-bubble]");var l=(k.length>0)?k.attr("data-bubble"):"body";return l},getBubbleRootParent:function(){var l=this.hintElement;var j=this.hintBubble;var k="body";var m=true;while(m==true){j=l.closest("*[data-parent]");if(j.length){k=j.attr("data-bubble");l=g("*[data-uxid="+k+"]");m=true}else{m=false}}return k}};var c=g.fn.hint;g.fn.hint=function(l){var j=g(this);var n=j.data("hint");var m=j.data();var k=g.extend({},g.fn.hint.defaults,typeof m=="object"&&m);if(n){return}else{j.data("hint",(n=new e(j,k)))}};g.fn.hint.defaults={delayIn:500,delayOut:2000,fade:false,fallback:"",gravity:"n",html:true,offset:0,opacity:1,content:"hint",trigger:"hover",};g.fn.hint.Constructor=e;g.fn.hint.noConflict=function(){g.fn.hint=c;return this}}(window.jQuery);$(document).ready(function(){if($.fn.livequery){$("*[data-toggle=hint]").livequery(function(){var a=$(this);a.hint()})}});